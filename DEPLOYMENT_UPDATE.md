# 部署命令更新

由于内存优化，现在需要使用自定义的gunicorn配置文件进行部署。

## 更新部署命令

将原来的部署命令：
```bash
gunicorn main:app
```

更新为：
```bash
gunicorn -c gunicorn.conf.py main:app
```

## 优化内容

1. **延迟加载NLP库** - jieba和snownlp只在需要时才加载
2. **内存缓存** - 使用LRU缓存减少重复计算
3. **垃圾回收优化** - 主动清理内存和调整GC阈值
4. **单进程模式** - 在512MB限制下使用单进程避免内存竞争
5. **修复第三方库警告** - 过滤jieba的正则表达式警告

## 内存使用优化

- 预加载应用以节省内存
- 限制最大请求数防止内存泄漏
- 使用内存文件系统加速临时文件操作
- 精简情感关键词字典

这些优化应该能够将内存使用控制在512MB以内。